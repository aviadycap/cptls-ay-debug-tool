package com.capitolis.websocket.ay.debug.tool.utils;

import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;
import lombok.SneakyThrows;
import lombok.extern.slf4j.Slf4j;
import org.junit.jupiter.api.Test;

import static com.capitolis.websocket.ay.debug.tool.utils.JsonPrinter.formatJsonAsTable;
import static org.assertj.core.api.BDDAssertions.then;

@Slf4j
class JsonUtilTest {

    @Test
    public void formatJsonAsTableTest() {
        //given
        String json = "{\"id\":\"6348852d-c147-4080-bdde-835e0fe5dfc5\",\"created\":[2025,3,6,14,40,44,731734000],\"updated\":[2025,3,6,14,40,44,760956000],\"createdBy\":2274,\"updatedBy\":2274,\"minimumFee\":0,\"componentId\":\"49459c82-9000-45dc-9c25-cc25275bf938\",\"startDate\":[2025,3,13],\"maturityDate\":[2025,6,25],\"maturityType\":\"TERM\",\"rateType\":\"DISCOUNT\",\"rate\":0.12,\"floatingRateIndex\":null,\"floatingRateIndexTenor\":null,\"spread\":null,\"floorRate\":0,\"notionalAmount\":475000,\"notionalCurrency\":\"USD\",\"paymentFrequency\":null,\"marginPercentage\":1,\"rateResetFrequency\":null,\"averagingMethod\":null,\"rateDayCountFraction\":\"ACTUAL_360\",\"accrualPeriodDayConvention\":\"MODIFIED_FOLLOWING\",\"paymentDayConvention\":null,\"paymentBusinessDayCalendar\":[\"USNY\"],\"rateFixingBusinessDayCalendar\":[\"USNY\"],\"rateFixingDayOffset\":-1,\"rateFixingDayOffsetType\":\"BUSINESS_DAYS\",\"paymentDayOfMonth\":null,\"paymentWeekWithinMonth\":null,\"paymentWeekday\":null,\"paymentDayOffset\":0,\"paymentDayOffsetType\":\"BUSINESS_DAYS\",\"firstCouponDate\":[2025,6,25],\"tradeDate\":[2025,3,12],\"initialRate\":null,\"initialRateOffset\":0,\"consecutiveDatesIndicator\":\"NONE\",\"proceedsAmount\":458464.72,\"firstStub\":\"LONG\",\"lastStub\":\"LONG\",\"placementAgentFee\":0.0005,\"envelopeId\":\"f1b0da9c-8c1c-4c61-8505-3acb46e39d73\",\"solutionSeriesId\":null,\"noteSeriesId\":\"9d7f7721-b341-485f-b262-e44d9b185610\",\"interestPayer\":23170,\"interestReceiver\":null,\"ignorePaymentTypes\":[],\"paymentPeriods\":[{\"id\":\"fb9bb26e-d2ef-44ec-9499-76e633fca80c\",\"created\":[2025,3,6,14,40,44,748678000],\"updated\":[2025,3,6,14,40,44,760548000],\"createdBy\":2274,\"updatedBy\":2274,\"paymentTable\":null,\"paymentNumber\":1,\"startDate\":[2025,3,13],\"endDate\":[2025,6,25],\"calculatedEndDateWithoutAdjustments\":null,\"paymentDate\":[2025,6,25],\"interestAmount\":16535.28,\"principalAmount\":475000,\"indexRateWeightedAverage\":null,\"appliedRateWeightedAverage\":0.124846028986841953341150714522,\"notionalAverage\":458464.7200000000,\"spreadWeightedAverage\":null,\"createdDate\":[2025,3,6,14,40,44,748678000],\"lastModifiedBy\":2274,\"lastModifiedDate\":[2025,3,6,14,40,44,760548000]}],\"tags\":{\"series_id\":\"\",\"envelope_id\":\"f1b0da9c-8c1c-4c61-8505-3acb46e39d73\",\"component_id\":\"49459c82-9000-45dc-9c25-cc25275bf938\",\"note_series_id\":\"9d7f7721-b341-485f-b262-e44d9b185610\",\"envelope_friendly_id\":\"5139\"},\"createdDate\":[2025,3,6,14,40,44,731734000],\"lastModifiedBy\":2274,\"lastModifiedDate\":[2025,3,6,14,40,44,760956000]}";

        //when
        String output = JsonUtil.formatJsonRemoveKeys(json, "paymentPeriods");

        //then
        then(output).doesNotContain("paymentPeriods");
    }


    @SneakyThrows
    @Test
    public void prettyPrint() {
        //given
        ObjectMapper mapper = new ObjectMapper();
        mapper.registerModule(new JavaTimeModule());
        mapper.configure(JsonParser.Feature.ALLOW_NON_NUMERIC_NUMBERS, true);

        String json = "{\"id\":\"6348852d-c147-4080-bdde-835e0fe5dfc5\",\"minimumFee\":0,\"componentId\":\"49459c82-9000-45dc-9c25-cc25275bf938\",\"startDate\":[2025,3,13],\"maturityDate\":[2025,6,25],\"maturityType\":\"TERM\",\"rateType\":\"DISCOUNT\",\"rate\":0.12,\"floatingRateIndex\":null,\"floatingRateIndexTenor\":null,\"spread\":null,\"floorRate\":0,\"notionalAmount\":475000,\"notionalCurrency\":\"USD\",\"paymentFrequency\":null,\"marginPercentage\":1,\"rateResetFrequency\":null,\"averagingMethod\":null,\"rateDayCountFraction\":\"ACTUAL_360\",\"accrualPeriodDayConvention\":\"MODIFIED_FOLLOWING\",\"paymentDayConvention\":null,\"paymentBusinessDayCalendar\":[\"USNY\"],\"rateFixingBusinessDayCalendar\":[\"USNY\"],\"rateFixingDayOffset\":-1,\"rateFixingDayOffsetType\":\"BUSINESS_DAYS\",\"paymentDayOfMonth\":null,\"paymentWeekWithinMonth\":null,\"paymentWeekday\":null,\"paymentDayOffset\":0,\"paymentDayOffsetType\":\"BUSINESS_DAYS\",\"firstCouponDate\":[2025,6,25],\"tradeDate\":[2025,3,12],\"initialRate\":null,\"initialRateOffset\":0,\"consecutiveDatesIndicator\":\"NONE\",\"proceedsAmount\":458464.72,\"firstStub\":\"LONG\",\"lastStub\":\"LONG\",\"placementAgentFee\":0.0005,\"envelopeId\":\"f1b0da9c-8c1c-4c61-8505-3acb46e39d73\",\"solutionSeriesId\":null,\"noteSeriesId\":\"9d7f7721-b341-485f-b262-e44d9b185610\",\"interestPayer\":23170,\"interestReceiver\":null,\"ignorePaymentTypes\":[],\"paymentPeriods\":[{\"id\":\"fb9bb26e-d2ef-44ec-9499-76e633fca80c\",\"paymentNumber\":1,\"startDate\":[2025,3,13],\"endDate\":[2025,6,25],\"paymentDate\":[2025,6,25],\"interestAmount\":16535.28,\"principalAmount\":475000,\"indexRateWeightedAverage\":null,\"appliedRateWeightedAverage\":0.124846028986841953341150714522,\"notionalAverage\":458464.7200000000,\"spreadWeightedAverage\":null,\"accrualPeriods\":[{\"id\":\"5675861c-cab0-495d-8e94-8875aa9e214b\",\"periodNumber\":1,\"startDate\":[2025,3,13],\"endDate\":[2025,6,25],\"rateFixingDate\":null,\"indexRate\":null,\"rateIndicator\":null,\"rateSetManually\":false,\"appliedRate\":0.124846028986841953341150714522,\"interestAmount\":16535.28,\"days\":[{\"date\":[2025,3,13],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,14],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,15],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,16],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,17],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,18],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,19],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,20],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,21],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,22],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,23],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,24],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,25],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,26],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,27],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,28],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,29],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,30],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,3,31],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,1],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,2],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,3],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,4],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,5],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,6],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,7],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,8],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,9],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,10],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,11],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,12],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,13],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,14],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,15],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,16],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,17],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,18],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,19],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,20],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,21],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,22],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,23],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,24],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,25],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,26],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,27],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,28],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,29],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,4,30],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,1],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,2],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,3],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,4],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,5],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,6],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,7],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,8],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,9],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,10],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,11],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,12],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,13],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,14],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,15],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,16],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,17],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,18],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,19],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,20],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,21],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,22],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,23],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,24],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,25],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,26],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,27],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,28],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,29],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,30],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,5,31],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,1],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,2],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,3],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,4],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,5],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,6],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,7],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,8],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,9],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,10],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,11],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,12],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,13],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,14],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,15],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,16],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,17],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,18],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,19],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,20],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,21],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,22],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,23],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522},{\"date\":[2025,6,24],\"interestAmount\":158.993076923076923076923076923077,\"notionalAmountUsedToCalculateInterestAmount\":458464.72,\"fixedRateForDay\":null,\"spread\":null,\"appliedRate\":0.124846028986841953341150714522}]}]}]}";
        String jsonArray = """
        [
          { "name": "Alice", "age": 25, "city": "New York" },
          { "name": "Bob", "age": 30, "city": "Chicago" },
          { "name": "Charlie", "city": "San Francisco" }
        ]""";

        System.out.println(formatJsonAsTable(jsonArray));

        //when
        String paymentPeriods = JsonUtil.jsonGetByKeys(json, "paymentPeriods");
//        String accrualPeriod  = JsonUtil.jsonGetArrayByKeys(paymentPeriods, "accrualPeriods");
        String accrualPeriod = JsonPrinter.formatJsonAsTable(paymentPeriods);
//        String days = JsonUtil.jsonGetByKeys(accrualPeriod, "days");

        //then
        then(paymentPeriods).isNotBlank();
        then(paymentPeriods).doesNotContain("paymentPeriods");

//        String pstPeriods = JsonPrinter2.formatJsonAsTable(paymentPeriods);
//        System.out.println("\n" + pstPeriods);
        System.out.println("\n" + accrualPeriod);
//        log.info("\n" + days);
    }

}